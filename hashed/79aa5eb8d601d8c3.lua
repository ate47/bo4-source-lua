-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 20-02-2025 19:35
require( "lua/lobby/common/lobbycore" ) --[[ @ 0]]

Lobby.Hopper = {} --[[ @ 0]]
Lobby.Hopper.lobbyHopper = nil --[[ @ 0]]
Lobby.Hopper.HOPPER_STATE = {
	PARKED = 0,
	UNPARKED = 1
} --[[ @ 0]]
Lobby.Hopper.hopperState = Lobby.Hopper.HOPPER_STATE.UNPARKED --[[ @ 0]]
Lobby.Hopper.UpdateLobbyData = function ( f1_arg0, f1_arg1 )
	if Dvar[@"hash_44BADE8473F0165F"]:get() == true then
		return 1
	end
	local f1_local0 = 1 --[[ @ 0]]
	local f1_local1 = LuaEnum.UI.DIRECTOR_ONLINE_MP_PUBLIC --[[ @ 0]]
	local f1_local2 = Engine[@"hash_131C19A6AF221CC9"]( Engine[@"CurrentSessionMode"]() ) --[[ @ 0]]
	if f1_local2 == f1_arg0 then
		f1_local1 = LuaEnum.UI.DIRECTOR_ONLINE_MP_CUSTOM --[[ @ 0]]
	end
	local f1_local3 = LobbyData.GetLobbyMenuByName( f1_local1 ) --[[ @ 0]]
	if f1_local2 == f1_arg0 then
		if f1_arg1 ~= nil then
			Engine[@"hash_7DC3983C70B75088"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"], Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"], f1_arg1 ) --[[ @ 0]]
		end
		Lobby.Timer.SetDedicatedDelayedCMD( Lobby.Timer.LOBBY_DEDICATED_CMD.INVALID_CMD ) --[[ @ 0]]
		f1_local0 = 2 --[[ @ 0]]
	end
	Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Updating Lobby Data for Target: " .. f1_local3[@"name"] .. "\n" ) --[[ @ 0]]
	LobbyVM.OnLobbySettings( {
		toTarget = f1_local3,
		skipSwitchMode = true,
		isDevMap = false
	} ) --[[ @ 0]]
	LobbyVM.OnUpdateUI( {
		toTarget = f1_local3
	} ) --[[ @ 0]]
	local f1_local4 = 0 --[[ @ 0]]
	if f1_arg0 then
		Lobby.Timer.HostingLobby( {
			controller = f1_local4,
			lobbyType = f1_local3[@"LobbyType"],
			mainMode = f1_local3[@"hash_EB7DDC7F079D51B"],
			lobbyTimerType = f1_local3[@"hash_5558B67A321D1120"]
		} ) --[[ @ 0]]
	else
		Lobby.Timer.HostingLobbyEnd( {
			lobbyType = f1_local3[@"LobbyType"]
		} ) --[[ @ 0]]
		Lobby.Pregame.Clear() --[[ @ 0]]
	end
	return f1_local0
end
 --[[ @ 0]]
Lobby.Hopper.OnClientJoin = function ( f2_arg0 )
	if Dvar[@"hash_44BADE8473F0165F"]:get() == true then
		return 1
	elseif Engine[@"hash_5E39F1F30B306065"]() == false then
		return 1
	end
	local f2_local0 = f2_arg0.clientPlaylist --[[ @ 0]]
	if f2_local0 == 255 then
		return 1
	end
	local f2_local1 = Engine[@"hash_46D46FF33D97B908"]( f2_local0 ) --[[ @ 0]]
	local f2_local2 = Engine[@"hash_17B3B2B73B53EB34"]() --[[ @ 0]]
	local f2_local3 = 1 --[[ @ 0]]
	if Lobby.Hopper.HOPPER_STATE.PARKED == Lobby.Hopper.hopperState then
		if f2_local2 ~= f2_local1 then
			Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Rejecting client because they want playlist " .. f2_local1 .. " but we're on parkingplaylist " .. f2_local2 .. " for playlist " .. f2_local2 .. "\n" ) --[[ @ 0]]
			f2_local3 = 0 --[[ @ 0]]
		else
			f2_local3 = Lobby.Hopper.UpdateLobbyData( f2_local0, f2_arg0.leaderXuid ) --[[ @ 0]]
			Lobby.Launch.HostLaunchClear() --[[ @ 0]]
			Engine[@"hash_7E7E0FF664B7D7BF"]( f2_arg0.dlcBits ) --[[ @ 0]]
			Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Unparking onto playlist " .. f2_local0 .. "\n" ) --[[ @ 0]]
			Engine[@"hash_43933ED935F64F94"]( f2_local0 ) --[[ @ 0]]
			Lobby.Matchmaking.UpdateLatencyBand() --[[ @ 0]]
			Engine[@"hash_5CE25A90DC553200"]( f2_local0 ) --[[ @ 0]]
			LuaUtils.SetQuickplayPlaylistID( f2_local0 ) --[[ @ 0]]
			Dvar[@"hash_705B789559A59177"]:set( f2_local0 ) --[[ @ 0]]
			Dvar[@"hash_7A96CE8EF5319D80"]:set( Lobby.Matchmaking.GetMapPackBits( f2_arg0.dlcBits, f2_local0 ) ) --[[ @ 0]]
			Engine[@"hash_641D81D6B58AAF3F"]( Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"], Dvar[@"party_maxplayers"]:get() ) --[[ @ 0]]
			Lobby.Matchmaking.SetSkillWeight( 0.01 ) --[[ @ 0]]
			Lobby.Matchmaking.UpdateAdvertising( " hopper unpark " ) --[[ @ 0]]
			Lobby.Hopper.hopperState = Lobby.Hopper.HOPPER_STATE.UNPARKED --[[ @ 0]]
		end
	elseif Lobby.Hopper.HOPPER_STATE.UNPARKED == Lobby.Hopper.hopperState and f2_local0 ~= 255 and f2_local0 ~= f2_local2 then
		Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Rejecting client because they want playlist " .. f2_local0 .. " but we're unparked on playlist " .. f2_local2 .. "\n" ) --[[ @ 0]]
		f2_local3 = 0 --[[ @ 0]]
	end
	return f2_local3
end
 --[[ @ 0]]
Lobby.Hopper.OnSessionEnd = function ( f3_arg0 )
	if Dvar[@"hash_44BADE8473F0165F"]:get() == true then
		return 
	end
	local f3_local0 = f3_arg0.lobbyModule --[[ @ 0]]
	local f3_local1 = f3_arg0.lobbyType --[[ @ 0]]
	local f3_local2 = f3_arg0.lobbyMode --[[ @ 0]]
	if f3_local1 == Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"] then
		Engine[@"hash_2BBB5B39E4BA37EB"]( "old", true ) --[[ @ 0]]
	end
end
 --[[ @ 0]]
Lobby.Hopper.Pump = function ()
	if Engine[@"hash_5E39F1F30B306065"]() == false then
		return 
	elseif false == Dvar[@"hash_68827F6EDED32B08"]:get() then
		return 
	elseif Dvar[@"hash_44BADE8473F0165F"]:get() == true then
		return 
	elseif Dvar[@"hash_2B852BA138B9853A"]:exists() == true and Dvar[@"hash_2B852BA138B9853A"]:get() == true then
		return 
	elseif Dvar[@"hash_3E2390D9E82B6369"]:get() == true and Dvar[@"hash_74CE6DE7EC1A56FE"]:get() == true then
		return 
	elseif Lobby.Hopper.HOPPER_STATE.UNPARKED == Lobby.Hopper.hopperState then
		if Engine[@"hash_144FC97037CE42ED"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"], Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"], Enum[@"hash_6575E471C039DBD6"][@"hash_1092BC25E18D296F"] ) == 0 and not Engine[@"hash_4DFE2D4D623AD782"]( Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"] ) and false == Dvar[@"hash_74A8CF2E4D0E6736"]:get() and Dvar[@"hash_4DD6A5A551E5E17E"]:get() == 0 then
			local f4_local0 = Engine[@"hash_17B3B2B73B53EB34"]() --[[ @ 0]]
			local f4_local1 = Engine[@"hash_46D46FF33D97B908"]( f4_local0 ) --[[ @ 0]]
			if f4_local1 ~= 0 then
				Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "No clients left and we're currently on playlist " .. f4_local0 .. " - parking on playlist " .. f4_local1 .. "\n" ) --[[ @ 0]]
				Lobby.Hopper.hopperState = Lobby.Hopper.HOPPER_STATE.PARKED --[[ @ 0]]
				Lobby.Hopper.UpdateLobbyData() --[[ @ 0]]
				Dvar[@"hash_2686027EBE0C93F5"]:set( 0 ) --[[ @ 0]]
				Dvar[@"hash_705B789559A59177"]:set( f4_local1 ) --[[ @ 0]]
				Dvar[@"hash_7A96CE8EF5319D80"]:set( Lobby.Matchmaking.ContentPack.CONTENT_ORIGINALMAPS ) --[[ @ 0]]
				Dvar[@"hash_50E5350E8F7BD556"]:set( 1 ) --[[ @ 0]]
				Lobby.Matchmaking.UpdateAdvertising( "hopper park" ) --[[ @ 0]]
				Engine[@"hash_43933ED935F64F94"]( f4_local1 ) --[[ @ 0]]
				Engine[@"hash_5CE25A90DC553200"]( f4_local1 ) --[[ @ 0]]
				LuaUtils.SetQuickplayPlaylistID( f4_local1 ) --[[ @ 0]]
				if Dvar[@"hash_3E2390D9E82B6369"]:get() == true then
					Dvar[@"hash_74CE6DE7EC1A56FE"]:set( true ) --[[ @ 0]]
				end
			end
		end
	elseif Lobby.Hopper.HOPPER_STATE.PARKED == Lobby.Hopper.hopperState then
		
	else
		
	end
end
 --[[ @ 0]]
Lobby.Hopper.OnIsParked = function ()
	if Dvar[@"hash_44BADE8473F0165F"]:get() == true then
		return false
	else
		return Lobby.Hopper.HOPPER_STATE.PARKED == Lobby.Hopper.hopperState
	end
end
 --[[ @ 0]]
