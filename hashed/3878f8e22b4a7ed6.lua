-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 20-02-2025 19:33
require( "lua/lobby/common/lobbycore" ) --[[ @ 0]]

Lobby.Launch = {} --[[ @ 0]]
Lobby.Launch.hostLaunch = {} --[[ @ 0]]
Lobby.Launch.clientLaunch = {} --[[ @ 0]]
Lobby.Launch.printInterval = 5000 --[[ @ 0]]
Lobby.Launch.IsHostLaunching = function ()
	if Lobby.Launch.hostLaunch.startTime ~= nil then
		return true
	elseif Engine[@"hash_39380E261FDE8943"] and Engine[@"hash_39380E261FDE8943"]() then
		return true
	else
		return false
	end
end
 --[[ @ 0]]
Lobby.Launch.OnHostLaunch = function ( f2_arg0 )
	if f2_arg0.stage == Enum[@"LaunchGameState"][@"hash_7B9EF0D7A2C75AE4"] then
		return Lobby.Launch.HostLaunchInit()
	elseif f2_arg0.stage == Enum[@"LaunchGameState"][@"hash_69ED8070AD1A739A"] then
		return Lobby.Launch.HostLaunchPump( f2_arg0 )
	else
		Engine[@"hash_3141E84ACAAE0A4E"]() --[[ @ 0]]
		return Lobby.Launch.HostLaunchClear()
	end
end
 --[[ @ 0]]
Lobby.Launch.HostLaunchInit = function ()
	Engine[@"ForceNotifyModelSubscriptions"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.closePopups" ) ) --[[ @ 0]]
	Lobby.Launch.hostLaunch = {} --[[ @ 0]]
	Lobby.Launch.hostLaunch.fadeToBlack = false --[[ @ 0]]
	local f3_local0 = Engine[@"hash_69D33D652B9B0F3B"]() --[[ @ 0]]
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.hideMenusForGameStart" ), 1 ) --[[ @ 0]]
	Lobby.Launch.hostLaunch.startTime = f3_local0 --[[ @ 0]]
	Lobby.Launch.hostLaunch.printAtTime = f3_local0 + Lobby.Launch.printInterval --[[ @ 0]]
	Lobby.Launch.hostLaunch.fadeToBlackTime = f3_local0 + Dvar[@"hash_1F6674CAE730AA08"]:get() --[[ @ 0]]
	Lobby.Launch.hostLaunch.launchTime = f3_local0 + Dvar[@"hash_3AC3D72F21D83F1B"]:get() --[[ @ 0]]
	Lobby.Launch.hostLaunch.waitForClientAckTime = f3_local0 + Dvar[@"hash_2E0639684531C4C8"]:get() --[[ @ 0]]
	Lobby.Timer.ResetUIModel() --[[ @ 0]]
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), true ) --[[ @ 0]]
	return true
end
 --[[ @ 0]]
Lobby.Launch.MapImagePreloading = function ( f4_arg0 )
	local f4_local0 = false --[[ @ 0]]
	if Engine[@"CurrentSessionMode"]() == Enum[@"eModes"][@"hash_73723205FAE52C4A"] then
		if (Engine[@"hash_144FC97037CE42ED"]( f4_arg0, Engine[@"hash_3C3DF042E7492B66"]( Enum[@"LobbyModule"][@"hash_40C46B73E8E18BA2"] ), Enum[@"hash_6575E471C039DBD6"][@"hash_1092BC25E18D296F"] ) or 0) <= 1 and Engine[@"hash_169811927938FCD7"]() ~= "ztutorial" then
			f4_local0 = false --[[ @ 0]]
		else
			f4_local0 = true --[[ @ 0]]
		end
	end
	local f4_local1 = Engine[@"hash_1C53F8D38DF9042B"]( Engine[@"hash_3E67E7253CC272C9"]() ) --[[ @ 0]]
	local f4_local2 --[[ @ 0]]
	if not f4_local0 then
		f4_local2 = LuaUtils.GetMapsTable() --[[ @ 0]]
		f4_local2 = f4_local2[f4_local1] --[[ @ 0]]
		if f4_local2 then
			f4_local2 = LuaUtils.GetMapsTable() --[[ @ 0]]
			f4_local2 = f4_local2[f4_local1].introMovie --[[ @ 0]]
		end
	else
		f4_local2 = false --[[ @ 0]]
	end
	if f4_local2 then
		return false
	end
	local f4_local3 = LuaUtils.GetMapsTable() --[[ @ 0]]
	f4_local3 = f4_local3[f4_local1] --[[ @ 0]]
	if f4_local3 then
		f4_local3 = LuaUtils.GetMapsTable() --[[ @ 0]]
		f4_local3 = f4_local3[f4_local1].loadingImage --[[ @ 0]]
	end
	if f4_local3 and not Engine[@"hash_8A31148EE1BE3B1"]( f4_local3 ) then
		return true
	end
	return false
end
 --[[ @ 0]]
Lobby.Launch.HostLaunchPump = function ( f5_arg0 )
	local f5_local0 = Engine[@"hash_69882F293C327557"]() --[[ @ 0]]
	if f5_local0 == LobbyData.GetLobbyMenuIDByName( LuaEnum.UI.DIRECTOR_ONLINE_MP_PUBLIC ) then
		local f5_local1 = false --[[ @ 0]]
		local f5_local2 = Engine[@"hash_144FC97037CE42ED"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"], Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"], Enum[@"hash_6575E471C039DBD6"][@"hash_1092BC25E18D296F"] ) --[[ @ 0]]
		if f5_local2 < Dvar[@"hash_2500E4DB2F10F5EE"]:get() then
			Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Lobby.Launch.LaunchGameExec: Not enough players (" .. tostring( f5_local2 ) .. "/" .. tostring( Dvar[@"hash_2500E4DB2F10F5EE"]:get() ) .. "), restart timer.\n" ) --[[ @ 0]]
			f5_local1 = true --[[ @ 0]]
		end
		if CoDShared.IsGametypeTeamBased() == true and Engine[@"CurrentSessionMode"]() ~= Enum[@"eModes"][@"hash_3BF1DCC8138A9D39"] then
			local f5_local3 = Engine[@"hash_4755D55B3813D249"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"], Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"] ) --[[ @ 0]]
			if f5_local3 ~= nil then
				local f5_local4 = 0 --[[ @ 0]]
				local f5_local5 = 0 --[[ @ 0]]
				for f5_local9, f5_local10 in ipairs( f5_local3.sessionClients ) --[[ @ 0]] do
					if f5_local10.team == Enum[@"team_t"][@"hash_42A34B055ADD98AB"] then
						f5_local4 = f5_local4 + 1 --[[ @ 0]]
					end
					if f5_local10.team == Enum[@"team_t"][@"hash_33F83D7CE4BD7B68"] then
						f5_local5 = f5_local5 + 1 --[[ @ 0]]
					end
				end
				if math.abs( f5_local4 - f5_local5 ) > 1 then
					Engine[@"PrintWarning"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_59962D5EF982597"], "Lobby.Launch.LaunchGameExec: Teams are not balanced (teamAlliesCount: " .. tostring( f5_local4 ) .. "/teamAxisCount: " .. tostring( f5_local5 ) .. "), restart timer.\n" ) --[[ @ 0]]
					f5_local1 = true --[[ @ 0]]
				end
			end
		end
		if Engine[@"hash_72DA54CF5D6B7F02"]() and Engine[@"hash_49E5BE3B4BBA4E0E"]( "lobby_forceBalanced" ) == true then
			f5_local1 = false --[[ @ 0]]
		end
		if f5_local1 == true then
			Engine[@"hash_600B972AE22481F1"]() --[[ @ 0]]
			Lobby.Launch.HostLaunchClear() --[[ @ 0]]
			local f5_local3 = LobbyData.GetLobbyMenuByID( f5_local0 ) --[[ @ 0]]
			Lobby.Timer.HostingLobby( {
				controller = Engine[@"GetPrimaryController"](),
				lobbyType = Enum[@"LobbyType"][@"hash_692676CF5B6FCD43"],
				mainMode = f5_local3[@"hash_EB7DDC7F079D51B"],
				lobbyTimerType = f5_local3[@"hash_5558B67A321D1120"],
				matchEnded = true,
				status = Lobby.Timer.LOBBY_STATUS.RESET_TO_NEED
			} ) --[[ @ 0]]
			return false
		end
	end
	if Engine[@"GetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ) ) == false then
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), true ) --[[ @ 0]]
	end
	if not f5_arg0.hasAllClientsGotLatestStateMsg and Engine[@"hash_69D33D652B9B0F3B"]() < Lobby.Launch.hostLaunch.waitForClientAckTime then
		return false
	elseif not Engine[@"hash_5E39F1F30B306065"]() then
		if Lobby.Launch.MapImagePreloading( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"] ) then
			return false
		elseif not Engine[@"IsCommonFastFileLoaded"]() then
			local f5_local1 = Engine[@"hash_69D33D652B9B0F3B"]() --[[ @ 0]]
			if f5_local1 > Lobby.Launch.hostLaunch.printAtTime then
				Lobby.Launch.hostLaunch.printAtTime = f5_local1 + Lobby.Launch.printInterval --[[ @ 0]]
				Engine[@"PrintInfo"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_78E4EED9A90F9B5E"], "Waiting for common FF \n" ) --[[ @ 0]]
			end
			return false
		end
	end
	if Engine[@"CurrentSessionMode"]() ~= Enum[@"eModes"][@"hash_3BF1DCC8138A9D39"] then
		Engine[@"hash_10EFF9EC55782EDB"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"], Engine[@"hash_3C3DF042E7492B66"]( Enum[@"LobbyModule"][@"hash_298EA1BB7164D103"] ) ) --[[ @ 0]]
	end
	return true
end
 --[[ @ 0]]
Lobby.Launch.HostLaunchClear = function ()
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.hideMenusForGameStart" ), 0 ) --[[ @ 0]]
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), false ) --[[ @ 0]]
	Lobby.Launch.hostLaunch.startTime = nil --[[ @ 0]]
	return true
end
 --[[ @ 0]]
Lobby.Launch.OnClientLaunch = function ( f7_arg0 )
	if f7_arg0.stage == Enum[@"LaunchGameState"][@"hash_7B9EF0D7A2C75AE4"] then
		return Lobby.Launch.ClientLaunchInit( f7_arg0.justConnected )
	elseif f7_arg0.stage == Enum[@"LaunchGameState"][@"hash_69ED8070AD1A739A"] then
		return Lobby.Launch.ClientLaunchPump()
	else
		Engine[@"hash_3141E84ACAAE0A4E"]() --[[ @ 0]]
		return Lobby.Launch.ClientLaunchClear()
	end
end
 --[[ @ 0]]
Lobby.Launch.ClientLaunchInit = function ( f8_arg0 )
	if not LobbyVM.CanClientLaunch( f8_arg0 ) then
		return false
	end
	Engine[@"ForceNotifyModelSubscriptions"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.closePopups" ) ) --[[ @ 0]]
	Lobby.Launch.clientLaunch = {} --[[ @ 0]]
	Lobby.Launch.clientLaunch.fadeToBlack = false --[[ @ 0]]
	local f8_local0 = Dvar[@"hash_1F6674CAE730AA08"]:get() --[[ @ 0]]
	local f8_local1 = Dvar[@"hash_3AC3D72F21D83F1B"]:get() --[[ @ 0]]
	if f8_arg0 then
		f8_local0 = Dvar[@"hash_CD73B6D54F107A5"]:get() --[[ @ 0]]
		f8_local1 = Dvar[@"hash_68663791C854DEC4"]:get() --[[ @ 0]]
	end
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.hideMenusForGameStart" ), 1 ) --[[ @ 0]]
	local f8_local2 = Engine[@"hash_69D33D652B9B0F3B"]() --[[ @ 0]]
	Lobby.Launch.clientLaunch.startTime = f8_local2 --[[ @ 0]]
	Lobby.Launch.clientLaunch.fadeToBlackTime = f8_local2 + f8_local0 --[[ @ 0]]
	Lobby.Launch.clientLaunch.launchTime = f8_local2 + f8_local1 --[[ @ 0]]
	Lobby.Launch.clientLaunch.printAtTime = f8_local2 + Lobby.Launch.printInterval --[[ @ 0]]
	Lobby.Timer.ResetUIModel() --[[ @ 0]]
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), true ) --[[ @ 0]]
	return true
end
 --[[ @ 0]]
Lobby.Launch.ClientLaunchPump = function ()
	if Engine[@"GetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ) ) == false then
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), true ) --[[ @ 0]]
	end
	if false == Lobby.Launch.clientLaunch.fadeToBlack and Engine[@"hash_69D33D652B9B0F3B"]() > Lobby.Launch.clientLaunch.fadeToBlackTime then
		Lobby.Launch.clientLaunch.fadeToBlack = true --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.hideMenusForGameStart" ), 1 ) --[[ @ 0]]
	end
	if Lobby.Launch.MapImagePreloading( Enum[@"LobbyModule"][@"hash_40C46B73E8E18BA2"] ) then
		return false
	elseif Lobby.Launch.clientLaunch.launchTime ~= nil and Engine[@"hash_69D33D652B9B0F3B"]() < Lobby.Launch.clientLaunch.launchTime then
		return false
	elseif not Engine[@"IsCommonFastFileLoaded"]() then
		local f9_local0 = Engine[@"hash_69D33D652B9B0F3B"]() --[[ @ 0]]
		if f9_local0 > Lobby.Launch.clientLaunch.printAtTime then
			Lobby.Launch.clientLaunch.printAtTime = f9_local0 + Lobby.Launch.printInterval --[[ @ 0]]
			Engine[@"PrintInfo"]( Enum[@"hash_77A63DCD561B0FA8"][@"hash_78E4EED9A90F9B5E"], "Client Waiting for common FF \n" ) --[[ @ 0]]
		end
		return false
	elseif 1 == Dvar[@"hash_3F1DE3CEF5A9E0DB"]:get() and LuaUtils.IsArenaPublicGame() then
		Engine[@"hash_208587B36B7F8EF5"]( Engine[@"GetPrimaryController"](), Enum[@"hash_6DB66542051E7C15"][@"hash_78D8FC5F8CDC337F"] ) --[[ @ 0]]
	end
	return true
end
 --[[ @ 0]]
Lobby.Launch.ClientLaunchClear = function ()
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.hideMenusForGameStart" ), 0 ) --[[ @ 0]]
	Engine[@"SetModelValue"]( Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "lobbyRoot.spinnerActive" ), false ) --[[ @ 0]]
	return true
end
 --[[ @ 0]]
