-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 20-02-2025 19:33
CoD.PCKoreaEventUtility = {} --[[ @ 0]]
CoD.PCKoreaEventUtility.GetWeekStartTime = function ()
	return {
		1551203968,
		1551808768,
		1552413568,
		1553018368
	}
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.GetWeekEndTime = function ()
	return {
		1551808768,
		1552413568,
		1553018368,
		1553623168
	}
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.eventEndTime = "1553623200" --[[ @ 0]]
CoD.PCKoreaEventUtility.GetRewardsImage = function ()
	return {
		"uie_ui_icon_igrevent_reward_1",
		"uie_ui_icon_igrevent_reward_2",
		"uie_ui_icon_igrevent_reward_3",
		"uie_ui_icon_igrevent_reward_4"
	}
end
 --[[ @ 0]]
DataSources.PCKoreaEventWeekList = ListHelper_SetupDataSource( "PCKoreaEventWeekList", function ( f4_arg0 )
	local f4_local0 = 86400 --[[ @ 0]]
	local f4_local1 = 3600 --[[ @ 0]]
	local f4_local2 = 3 --[[ @ 0]]
	local f4_local3 = CoD.PCKoreaEventUtility.GetRewardsImage() --[[ @ 0]]
	local f4_local4 = {} --[[ @ 0]]
	local f4_local5 = Engine[@"hash_2E43D4F4AB33D421"]( f4_arg0 ) --[[ @ 0]]
	local f4_local6 = Engine[@"hash_691D6FDBC677ECD8"]() --[[ @ 0]]
	local f4_local7 = CoD.PCKoreaEventUtility.GetWeekStartTime() --[[ @ 0]]
	local f4_local8 = CoD.PCKoreaEventUtility.GetWeekEndTime() --[[ @ 0]]
	for f4_local9 = 1 --[[ @ 0]], #f4_local5.weekly_completion, 1 do
		local f4_local12 = false --[[ @ 0]]
		local f4_local13 = false --[[ @ 0]]
		local f4_local14 = false --[[ @ 0]]
		local f4_local15 = false --[[ @ 0]]
		local f4_local16 = f4_local5.weekly_completion[f4_local9].days_completed --[[ @ 0]]
		local f4_local17 = f4_local5.prev_weekly_completion[f4_local9].days_completed --[[ @ 0]]
		local f4_local18 = "" --[[ @ 0]]
		if f4_local7[f4_local9] < f4_local6 and f4_local6 < f4_local8[f4_local9] then
			f4_local12 = true --[[ @ 0]]
			local f4_local19, f4_local20, f4_local21, f4_local22 = CoD.PCKoreaEventUtility.GetTimeFromUnixTime( f4_local8[f4_local9] - f4_local6 ) --[[ @ 0]]
			f4_local18 = Engine[@"hash_4F9F1239CFD921FE"]( @"hash_3DA746FFD2F61827", f4_local19, f4_local20 ) --[[ @ 0]]
		elseif f4_local8[f4_local9] < f4_local6 and f4_local16 < f4_local2 then
			f4_local13 = true --[[ @ 0]]
		end
		local f4_local19 = {} --[[ @ 0]]
		local f4_local20 = {
			isCompleted = f4_local2 <= f4_local16,
			isActive = f4_local12,
			isFailed = f4_local13,
			weekNumber = f4_local9
		} --[[ @ 0]]
		local f4_local21 --[[ @ 0]]
		if f4_local2 > f4_local16 or f4_local16 == f4_local17 then
			f4_local21 = false --[[ @ 0]]
		else
			f4_local21 = true --[[ @ 0]]
		end
		f4_local20.showCompletedAnimation = f4_local21 --[[ @ 0]]
		f4_local20.weekTimeRemaining = f4_local18 --[[ @ 0]]
		f4_local20.rewardImage = f4_local3[f4_local9] --[[ @ 0]]
		f4_local19.models = f4_local20 --[[ @ 0]]
		f4_local20 = "PCKoreaEventWeek" .. f4_local9 --[[ @ 0]]
		DataSources[f4_local20] = CoD.PCKoreaEventUtility.SetupKoreaDayListDataSource( f4_local20, f4_local16, f4_local17, f4_local12, f4_local13 ) --[[ @ 0]]
		f4_local19.models.dayList = f4_local20 --[[ @ 0]]
		table.insert( f4_local4, f4_local19 ) --[[ @ 0]]
	end
	return f4_local4
end, true ) --[[ @ 0]]
CoD.PCKoreaEventUtility.SetupKoreaDayListDataSource = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4 )
	return DataSourceHelpers.ListSetup( f5_arg0, function ( f6_arg0 )
		return CoD.PCKoreaEventUtility.GetEventweekProgression( f5_arg1, f5_arg2, f5_arg3, f5_arg4 )
	end
	, false, nil, nil )
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.GetEventweekProgression = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3 )
	local f7_local0 = {} --[[ @ 0]]
	for f7_local1 = 1 --[[ @ 0]], 3, 1 do
		local f7_local4 = {} --[[ @ 0]]
		local f7_local5 = {
			isCompleted = f7_local1 <= f7_arg0,
			isActive = f7_arg2 and f7_arg0 < f7_local1,
			isFailed = f7_arg3
		} --[[ @ 0]]
		local f7_local6 --[[ @ 0]]
		if f7_arg0 ~= f7_local1 or f7_arg0 == f7_arg1 then
			f7_local6 = false --[[ @ 0]]
		else
			f7_local6 = true --[[ @ 0]]
		end
		f7_local5.showCompletedAnimation = f7_local6 --[[ @ 0]]
		f7_local4.models = f7_local5 --[[ @ 0]]
		table.insert( f7_local0, f7_local4 ) --[[ @ 0]]
	end
	return f7_local0
end
 --[[ @ 0]]
DataSources.PCKoreaEventCurrentDayProgression = {
	prepare = function ( f8_arg0, f8_arg1, f8_arg2 )
		local f8_local0 = 60 --[[ @ 0]]
		local f8_local1 = 120 --[[ @ 0]]
		local f8_local2 = 30 --[[ @ 0]]
		local f8_local3 = Engine[@"CreateModel"]( Engine[@"GetModelForController"]( f8_arg0 ), "PCKoreaEventCurrentDayProgression" ) --[[ @ 0]]
		local f8_local4 = Engine[@"hash_2E43D4F4AB33D421"]( f8_arg0 ) --[[ @ 0]]
		local f8_local5 = math.floor( f8_local4.progress_today / f8_local2 * f8_local0 ) --[[ @ 0]]
		local f8_local6 --[[ @ 0]]
		if f8_local4.next_day_utc ~= f8_local4.prev_next_day_utc then
			f8_local6 = 0 --[[ @ 0]]
			if not f8_local6 then
			
			else
				local f8_local7 = Engine[@"hash_4F9F1239CFD921FE"]( @"hash_6B14283B7023E6C6", math.ceil( f8_local2 - (f8_local4.progress_today / f8_local2 * f8_local0 - f8_local5) * f8_local2 ) ) --[[ @ 0]]
				Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f8_local3, "progression" ), f8_local6 / f8_local0 ) --[[ @ 0]]
				Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f8_local3, "progressBarRatio" ), f8_local6 / f8_local1 * f8_local0 ) --[[ @ 0]]
				Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f8_local3, "showStarCompletedAnimation" ), false ) --[[ @ 0]]
				Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f8_local3, "showCompletedAnimation" ), false ) --[[ @ 0]]
				Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f8_local3, "timeRemaining" ), f8_local7 ) --[[ @ 0]]
				return f8_local3
			end
		end
		f8_local6 = f8_local4.prev_progress_today --[[ @ 0]]
	end,
	getModel = function ( f9_arg0 )
		if not DataSources.PCKoreaEventCurrentDayProgression.prepared then
			return DataSources.PCKoreaEventCurrentDayProgression.prepare( f9_arg0 )
		else
			return Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "PCKoreaEventCurrentDayProgression" )
		end
	end
} --[[ @ 0]]
DataSources.PCKoreaEventProgression = {
	prepare = function ( f10_arg0, f10_arg1, f10_arg2 )
		local f10_local0 = Engine[@"CreateModel"]( Engine[@"GetModelForController"]( f10_arg0 ), "PCKoreaEventProgression" ) --[[ @ 0]]
		local f10_local1 = Engine[@"hash_2E43D4F4AB33D421"]( f10_arg0 ) --[[ @ 0]]
		local f10_local2 = 3 --[[ @ 0]]
		local f10_local3, f10_local4, f10_local5, f10_local6 = CoD.PCKoreaEventUtility.GetTimeFromUnixTime( Engine[@"GetSecondsRemainingServer"]( CoD.PCKoreaEventUtility.eventEndTime ) ) --[[ @ 0]]
		local f10_local7 = CoD.PCKoreaEventUtility.GetCurrentWeekData( f10_arg0 ) --[[ @ 0]]
		local f10_local8 = true --[[ @ 0]]
		for f10_local9 = 1 --[[ @ 0]], #f10_local1.weekly_completion, 1 do
			if f10_local1.weekly_completion[f10_local9].days_completed < f10_local2 then
				f10_local8 = false --[[ @ 0]]
			end
		end
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "isCompleted" ), f10_local8 ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "timeRemaining" ), Engine[@"hash_4F9F1239CFD921FE"]( @"hash_875394DD29160DA", f10_local3, f10_local4, f10_local5, f10_local6 ) ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "isCurrentWeekCompleted" ), false ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "currentWeekRewardImage" ), f10_local7.weekRewardImage ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "rewardPopUpImage" ), f10_local7.popUpWeekRewardImage ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "rewardPopUpText" ), f10_local7.weekRewardText ) --[[ @ 0]]
		Engine[@"SetModelValue"]( Engine[@"CreateModel"]( f10_local0, "showCompletedMonthPopUp" ), false ) --[[ @ 0]]
		return f10_local0
	end,
	getModel = function ( f11_arg0 )
		if not DataSources.PCKoreaEventProgression.prepared then
			return DataSources.PCKoreaEventProgression.prepare( f11_arg0 )
		else
			return Engine[@"CreateModel"]( Engine[@"GetGlobalModel"](), "PCKoreaEventProgression" )
		end
	end
} --[[ @ 0]]
CoD.PCKoreaEventUtility.SetupKoreaEventRemainingTime = function ( f12_arg0, f12_arg1 )
	f12_arg0:registerEventHandler( "korea_event_tick", function ( element, event )
		CoD.PCKoreaEventUtility.TickKoreaEvent( f12_arg1 ) --[[ @ 0]]
	end ) --[[ @ 0]]
	f12_arg0:addElement( LUI.UITimer.new( 100, "korea_event_tick", false, f12_arg0 ) ) --[[ @ 0]]
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.GetTimeFromUnixTime = function ( f14_arg0 )
	local f14_local0 = 86400 --[[ @ 0]]
	local f14_local1 = 3600 --[[ @ 0]]
	local f14_local2 = 60 --[[ @ 0]]
	local f14_local3 = math.floor( f14_arg0 / f14_local0 ) --[[ @ 0]]
	local f14_local4 = math.floor( (f14_arg0 - f14_local3 * f14_local0) / f14_local1 ) --[[ @ 0]]
	local f14_local5 = math.floor( (f14_arg0 - f14_local3 * f14_local0 - f14_local4 * f14_local1) / f14_local2 ) --[[ @ 0]]
	return f14_local3, f14_local4, f14_local5, f14_arg0 - f14_local3 * f14_local0 - f14_local4 * f14_local1 - f14_local5 * f14_local2
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.TickKoreaEvent = function ( f15_arg0 )
	local f15_local0 = Engine[@"GetModel"]( Engine[@"GetModelForController"]( f15_arg0 ), "PCKoreaEventProgression.timeRemaining" ) --[[ @ 0]]
	if f15_local0 then
		local f15_local1, f15_local2, f15_local3, f15_local4 = CoD.PCKoreaEventUtility.GetTimeFromUnixTime( Engine[@"GetSecondsRemainingServer"]( CoD.PCKoreaEventUtility.eventEndTime ) ) --[[ @ 0]]
		f15_local0:set( Engine[@"hash_4F9F1239CFD921FE"]( @"hash_875394DD29160DA", f15_local1, f15_local2, f15_local3, f15_local4 ) ) --[[ @ 0]]
	end
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.GetCurrentWeekData = function ( f16_arg0 )
	local f16_local0 = Engine[@"hash_691D6FDBC677ECD8"]() --[[ @ 0]]
	local f16_local1 = CoD.PCKoreaEventUtility.GetWeekStartTime() --[[ @ 0]]
	local f16_local2 = CoD.PCKoreaEventUtility.GetWeekEndTime() --[[ @ 0]]
	local f16_local3 = Engine[@"hash_2E43D4F4AB33D421"]( f16_arg0 ) --[[ @ 0]]
	local f16_local4 = nil --[[ @ 0]]
	local f16_local5 = CoD.PCKoreaEventUtility.GetRewardsImage() --[[ @ 0]]
	local f16_local6 = {
		"uie_ui_icon_igrevent_reward_1",
		"uie_ui_icon_igrevent_reward_2",
		"uie_ui_icon_igrevent_reward_3",
		"uie_ui_icon_igrevent_reward_4"
	} --[[ @ 0]]
	local f16_local7 = {
		@"hash_79E0BE9E9E425726",
		@"hash_2388F0DF7F9F9652",
		@"hash_7EF2768330FA5343",
		@"hash_6B82397B2896BC0D"
	} --[[ @ 0]]
	for f16_local8 = 1 --[[ @ 0]], #f16_local3.weekly_completion, 1 do
		f16_local4 = f16_local8 --[[ @ 0]]
		if f16_local1[f16_local8] < f16_local0 and f16_local0 < f16_local2[f16_local8] then
			break
		end
	end
	return {
		popUpWeekRewardImage = f16_local6[f16_local4],
		weekRewardImage = f16_local5[f16_local4],
		prevDaysCompleted = f16_local3.prev_weekly_completion[f16_local4].days_completed,
		currentDaysCompleted = f16_local3.weekly_completion[f16_local4].days_completed,
		weekRewardText = f16_local7[f16_local4]
	}
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.ShouldShowTierAnimation = function ( f17_arg0, f17_arg1 )
	local f17_local0 = 30 --[[ @ 0]]
	local f17_local1 = 60 --[[ @ 0]]
	return math.floor( f17_arg0 / f17_local0 * f17_local1 ) ~= math.floor( f17_arg1 / f17_local0 * f17_local1 )
end
 --[[ @ 0]]
CoD.PCKoreaEventUtility.AnimateKoreaEventBar = function ( f18_arg0, f18_arg1, f18_arg2, f18_arg3 )
	local f18_local0 = 60 --[[ @ 0]]
	local f18_local1 = 120 --[[ @ 0]]
	local f18_local2 = 3 --[[ @ 0]]
	local f18_local3 = 90 --[[ @ 0]]
	local f18_local4 = Engine[@"hash_2E43D4F4AB33D421"]( f18_arg1 ) --[[ @ 0]]
	local f18_local5 = Engine[@"GetModel"]( Engine[@"GetModelForController"]( f18_arg1 ), "PCKoreaEventProgression" ) --[[ @ 0]]
	local f18_local6 = Engine[@"GetModel"]( Engine[@"GetModelForController"]( f18_arg1 ), "PCKoreaEventCurrentDayProgression" ) --[[ @ 0]]
	local f18_local7 --[[ @ 0]]
	if f18_local4.next_day_utc ~= f18_local4.prev_next_day_utc then
		f18_local7 = 0 --[[ @ 0]]
		if not f18_local7 then
		
		else
			local f18_local8 = f18_local4.progress_today --[[ @ 0]]
			local f18_local9 = CoD.PCKoreaEventUtility.GetCurrentWeekData( f18_arg1 ) --[[ @ 0]]
			if f18_local5 and f18_local6 then
				local f18_local10 = 3000 --[[ @ 0]]
				local f18_local11 = 0 --[[ @ 0]]
				f18_arg0._delayAnimTimer = LUI.UITimer.newElementTimer( 1000, false, function ( f19_arg0 )
					f18_arg0._barAnimTimer = LUI.UITimer.newElementTimer( 10, false, function ( f20_arg0 )
						f18_local11 = f18_local11 + f20_arg0.timeElapsed --[[ @ 0]]
						local f20_local0 = f18_local11 / f18_local10 --[[ @ 0]]
						f20_local0 = f20_local0 * (2 - f20_local0) --[[ @ 0]]
						if f18_local10 <= f18_local11 then
							local f20_local1 --[[ @ 0]]
							if f18_local3 > f18_local8 / f18_local0 or f18_local7 / f18_local0 > f18_local3 or f18_local8 / f18_local0 >= f18_local1 then
								f20_local1 = false --[[ @ 0]]
							else
								f20_local1 = true --[[ @ 0]]
							end
							local f20_local2 = CoD.PCKoreaEventUtility.ShouldShowTierAnimation( f18_local8, f18_local7 ) --[[ @ 0]]
							f18_local6.progressBarRatio:set( f18_local8 / f18_local1 * f18_local0 ) --[[ @ 0]]
							f18_local6.progression:set( f18_local8 / f18_local0 ) --[[ @ 0]]
							f18_local6.showCompletedAnimation:set( f20_local2 ) --[[ @ 0]]
							f18_local6.showStarCompletedAnimation:set( f20_local1 ) --[[ @ 0]]
							if f18_local9.prevDaysCompleted ~= f18_local9.currentDaysCompleted and f18_local2 <= f18_local9.currentDaysCompleted then
								if f18_local5.isCompleted:get() then
									f18_local5.showCompletedMonthPopUp:set( true ) --[[ @ 0]]
								else
									f18_local5.isCurrentWeekCompleted:set( true ) --[[ @ 0]]
								end
							end
							f18_arg0._barAnimTimer:close() --[[ @ 0]]
						else
							local f20_local1 = f20_local0 * (f18_local8 - f18_local7) + f18_local7 --[[ @ 0]]
							local f20_local2 --[[ @ 0]]
							if f18_local3 > f20_local1 / f18_local0 or f18_local7 / f18_local0 > f18_local3 or f20_local1 / f18_local0 >= f18_local1 then
								f20_local2 = false --[[ @ 0]]
							else
								f20_local2 = true --[[ @ 0]]
							end
							local f20_local3 = CoD.PCKoreaEventUtility.ShouldShowTierAnimation( f18_local7, f20_local1 ) --[[ @ 0]]
							f18_local6.progression:set( f20_local1 / f18_local0 ) --[[ @ 0]]
							f18_local6.progressBarRatio:set( f20_local1 / f18_local1 * f18_local0 ) --[[ @ 0]]
							f18_local6.showCompletedAnimation:set( f20_local3 ) --[[ @ 0]]
							f18_local6.showStarCompletedAnimation:set( f20_local2 ) --[[ @ 0]]
						end
					end ) --[[ @ 0]]
					f18_arg0:addElement( f18_arg0._barAnimTimer ) --[[ @ 0]]
					f18_arg0._delayAnimTimer:close() --[[ @ 0]]
				end ) --[[ @ 0]]
				f18_arg0:addElement( f18_arg0._delayAnimTimer ) --[[ @ 0]]
			end
		end
	end
	f18_local7 = f18_local4.prev_progress_today --[[ @ 0]]
end
 --[[ @ 0]]
